<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<meta name="description" content="">
		<meta name="author" content="">
		<!--link rel="icon" href="../../favicon.ico"-->

		<title>Prueba</title>

		<!-- Bootstrap core CSS -->
		<link href="../statics/css/bootstrap.min.css" rel="stylesheet">


		<!-- Custom styles for this template -->
		<!--link href="carousel.css" rel="stylesheet"-->
	</head>
<!-- NAVBAR
================================================== -->
	<body>
		<form id="form-cgi" method="post" action="../cgi-bin/procesador_datos.py">
			<div>
				<div id="canvas" style="margin-left:500px">Dibujar<br/></div>
				<p><a class="btn btn-default" href="#" role="button" id="btn-reconocer" style="margin-left:500px">Reconocer &raquo;</a></p>
				<input type="hidden" name="matriz_canvas" id="matriz_canvas">
			</div>

	
		</form>


		<!-- Bootstrap core JavaScript
		================================================== -->
		<!-- Placed at the end of the document so the pages load faster -->
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
		<script src="../../dist/js/bootstrap.min.js"></script>
		<script src="../../assets/js/docs.min.js"></script>
		<!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
		<script src="../../assets/js/ie10-viewport-bug-workaround.js"></script>
		<script type="text/javascript">
			$("#btn-reconocer").click(function(event) {
                this.element=$("canvas")[0];
				ctx =this.element.getContext("2d");
				$("#matriz_canvas").val(ctx.getImageData(0,0,200,200).data);

				$("#form-cgi").submit()	
            
            });

			(function() {
			    // Creates a new canvas element and appends it as a child
			    // to the parent element, and returns the reference to
			    // the newly created canvas element


			    function createCanvas(parent, width, height) {
			        var canvas = {};
			        canvas.node = document.createElement('canvas');
			        canvas.context = canvas.node.getContext('2d');
			        canvas.node.width = width || 100;
			        canvas.node.height = height || 100;
			        parent.appendChild(canvas.node);
			        return canvas;
			    }

			    function init(container, width, height, fillColor) {
			        var canvas = createCanvas(container, width, height);
			        var ctx = canvas.context;
			        // define a custom fillCircle method
			        ctx.fillCircle = function(x, y, radius, fillColor) {
			            this.fillStyle = fillColor;
			            this.beginPath();
			            this.moveTo(x, y);
			            this.arc(x, y, radius, 0, Math.PI * 2, false);
			            this.fill();
			        };
			        ctx.clearTo = function(fillColor) {
			            ctx.fillStyle = fillColor;
			            ctx.fillRect(0, 0, width, height);
			        };
			        ctx.clearTo(fillColor || "#ddd");

			        // bind mouse events
			        canvas.node.onmousemove = function(e) {
			            if (!canvas.isDrawing) {
			               return;
			            }
			            var x = e.pageX - this.offsetLeft;
			            var y = e.pageY - this.offsetTop;
			            var radius = 4; // or whatever
			            var fillColor = '#ff0000';
			            ctx.fillCircle(x, y, radius, fillColor);
			        };
			        canvas.node.onmousedown = function(e) {
			            canvas.isDrawing = true;
			        };
			        canvas.node.onmouseup = function(e) {
			            canvas.isDrawing = false;
			        };
			    }

			    var container = document.getElementById('canvas');
			    init(container, 200, 200, '#ddd');

			})();
		</script>
	</body>
</html>

